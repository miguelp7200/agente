[2025-09-05 01:09:38] [INFO] 🚀 Iniciando diagnóstico de backends...
[2025-09-05 01:09:38] [INFO] 📋 Backend A: https://invoice-backend-yuhrx5x2ra-uc.a.run.app
[2025-09-05 01:09:38] [INFO] 📋 Backend B: https://invoice-backend-819133916464.us-central1.run.app
[2025-09-05 01:09:38] [INFO] 📂 Directorio de tests: tests
[2025-09-05 01:09:38] [INFO] 📁 Directorio de output: diagnosis_results
[2025-09-05 01:09:38] [INFO] 🔐 Obteniendo token de autenticación...
[2025-09-05 01:09:44] [SUCCESS] ✅ Token obtenido exitosamente
[2025-09-05 01:09:44] [INFO] 🔍 Probando conectividad con backends...
[2025-09-05 01:09:44] [INFO] [Backend-A] 🔍 Probando conectividad con Backend-A...
[2025-09-05 01:09:44] [INFO] [Backend-A] 📝 Creando sesión de test: connectivity-test-010944...
[2025-09-05 01:09:44] [SUCCESS] [Backend-A] ✅ Sesión creada exitosamente
[2025-09-05 01:09:44] [INFO] [Backend-A] 🔍 Probando endpoint /run...
[2025-09-05 01:09:46] [SUCCESS] [Backend-A] ✅ Conectividad OK - ADK responde correctamente
[2025-09-05 01:09:46] [INFO] [Backend-B] 🔍 Probando conectividad con Backend-B...
[2025-09-05 01:09:46] [INFO] [Backend-B] 📝 Creando sesión de test: connectivity-test-010946...
[2025-09-05 01:09:46] [SUCCESS] [Backend-B] ✅ Sesión creada exitosamente
[2025-09-05 01:09:46] [INFO] [Backend-B] 🔍 Probando endpoint /run...
[2025-09-05 01:09:48] [SUCCESS] [Backend-B] ✅ Conectividad OK - ADK responde correctamente
[2025-09-05 01:09:48] [INFO] 📂 Cargando casos de test desde: tests
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: estadisticas_ruts_unicos.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: estadisticas_ruts_unicos.test
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_cedible_cf_0012148561.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Factura cedible CF por solicitante 0012148561
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_cedible_sf_0012148561.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Factura cedible SF por solicitante 0012148561
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_cedibles_multiples_0012148561.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Facturas cedibles múltiples por solicitante 0012148561
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_estadisticas_ruts.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: facturas_estadisticas_ruts.test
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_fecha_especifica_2019-12-26.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Búsqueda por fecha específica 2019-12-26
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_mes_year_diciembre_2019.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Búsqueda por Mes y Año Específico
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_multiple_ruts.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Búsqueda por Múltiples RUTs
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_rango_fechas_diciembre_2019.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Búsqueda por rango de fechas diciembre 2019
[2025-09-05 01:09:48] [INFO] 📄 Procesando archivo: facturas_recent_by_date.test.json
[2025-09-05 01:09:48] [SUCCESS] ✅ Test cargado: Test: Búsqueda de Facturas Más Recientes
[2025-09-05 01:09:48] [INFO] 📊 Total de casos de test cargados: 10
[2025-09-05 01:09:48] [INFO] 🧪 Iniciando ejecución de tests...
[2025-09-05 01:09:48] [INFO] 🔄 Test 1/10: estadisticas_ruts_unicos.test
[2025-09-05 01:09:48] [INFO] [Backend-A] 📤 Enviando consulta: 'Dame estadísticas de los RUTs con más facturas, mo...'
[2025-09-05 01:09:48] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-383443246...
[2025-09-05 01:09:49] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:09:49] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:09:49] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:09:56] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:09:56] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:09:56] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'Aquí tienes las estadísticas de los RUTs con al menos 2 facturas:

*   **RUT:** 76742300-4, **Total ...'
[2025-09-05 01:09:56] [SUCCESS] [Backend-A] ✅ Respuesta recibida (7150.8399ms,  chars)
[2025-09-05 01:09:56] [INFO] [Backend-B] 📤 Enviando consulta: 'Dame estadísticas de los RUTs con más facturas, mo...'
[2025-09-05 01:09:56] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-224505333...
[2025-09-05 01:09:56] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:09:56] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:09:56] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:03] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:03] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:04] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'Aquí están las estadísticas de los RUTs que tienen 2 o más facturas:

*   **Rut:** 76742300-4, **Tot...'
[2025-09-05 01:10:04] [SUCCESS] [Backend-B] ✅ Respuesta recibida (7117.4601ms,  chars)
[2025-09-05 01:10:04] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:10:04] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:10:09] [INFO] 🔄 Test 2/10: Test: Factura cedible CF por solicitante 0012148561
[2025-09-05 01:10:09] [INFO] [Backend-A] 📤 Enviando consulta: 'Puedes darme la factura cedible cf cuyo solicitant...'
[2025-09-05 01:10:09] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-963507521...
[2025-09-05 01:10:09] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:10:09] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:09] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:12] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:12] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:12] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas cedibles con firma para el solicitante 0012148561....'
[2025-09-05 01:10:12] [SUCCESS] [Backend-A] ✅ Respuesta recibida (2643.8427ms,  chars)
[2025-09-05 01:10:12] [INFO] [Backend-B] 📤 Enviando consulta: 'Puedes darme la factura cedible cf cuyo solicitant...'
[2025-09-05 01:10:12] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-731855751...
[2025-09-05 01:10:12] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:10:12] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:12] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:15] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:15] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:15] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas cedibles con firma (CF) para el solicitante 0012148561....'
[2025-09-05 01:10:15] [SUCCESS] [Backend-B] ✅ Respuesta recibida (2692.9486ms,  chars)
[2025-09-05 01:10:15] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:10:15] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:10:20] [INFO] 🔄 Test 3/10: Test: Factura cedible SF por solicitante 0012148561
[2025-09-05 01:10:20] [INFO] [Backend-A] 📤 Enviando consulta: 'Puedes darme la factura cedible sf cuyo solicitant...'
[2025-09-05 01:10:20] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-238291377...
[2025-09-05 01:10:20] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:10:20] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:20] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:23] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:23] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:23] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas cedibles sin firma para el solicitante 0012148561....'
[2025-09-05 01:10:23] [SUCCESS] [Backend-A] ✅ Respuesta recibida (2737.8351ms,  chars)
[2025-09-05 01:10:23] [INFO] [Backend-B] 📤 Enviando consulta: 'Puedes darme la factura cedible sf cuyo solicitant...'
[2025-09-05 01:10:23] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-2109310451...
[2025-09-05 01:10:23] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:10:23] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:23] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:26] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:26] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:26] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas cedibles sin firma para el solicitante 0012148561....'
[2025-09-05 01:10:26] [SUCCESS] [Backend-B] ✅ Respuesta recibida (2591.1873ms,  chars)
[2025-09-05 01:10:26] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:10:26] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:10:31] [INFO] 🔄 Test 4/10: Test: Facturas cedibles múltiples por solicitante 0012148561
[2025-09-05 01:10:31] [INFO] [Backend-A] 📤 Enviando consulta: 'Puedes darme las facturas cedibles cuyo solicitant...'
[2025-09-05 01:10:31] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-195372877...
[2025-09-05 01:10:31] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:10:31] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:31] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:34] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:34] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:34] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas cedibles para el solicitante 0012148561....'
[2025-09-05 01:10:34] [SUCCESS] [Backend-A] ✅ Respuesta recibida (2599.3111ms,  chars)
[2025-09-05 01:10:34] [INFO] [Backend-B] 📤 Enviando consulta: 'Puedes darme las facturas cedibles cuyo solicitant...'
[2025-09-05 01:10:34] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-931677450...
[2025-09-05 01:10:34] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:10:34] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:34] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:38] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:38] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:38] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas cedibles para el solicitante 0012148561. ¿Hay algo más en lo que te pueda...'
[2025-09-05 01:10:38] [SUCCESS] [Backend-B] ✅ Respuesta recibida (3191.4621ms,  chars)
[2025-09-05 01:10:38] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:10:38] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:10:43] [INFO] 🔄 Test 5/10: facturas_estadisticas_ruts.test
[2025-09-05 01:10:43] [INFO] [Backend-A] 📤 Enviando consulta: 'Dame estadísticas de RUTs únicos: cuántas facturas...'
[2025-09-05 01:10:43] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-497655338...
[2025-09-05 01:10:43] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:10:43] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:43] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:48] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:48] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:48] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'Aquí tienes las estadísticas de los 10 RUTs únicos con al menos 1 factura, ordenados por total de fa...'
[2025-09-05 01:10:48] [SUCCESS] [Backend-A] ✅ Respuesta recibida (5001.0105ms,  chars)
[2025-09-05 01:10:48] [INFO] [Backend-B] 📤 Enviando consulta: 'Dame estadísticas de RUTs únicos: cuántas facturas...'
[2025-09-05 01:10:48] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-582943775...
[2025-09-05 01:10:49] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:10:49] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:10:49] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:10:55] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:10:55] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:10:55] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'Aquí tienes las estadísticas de los 10 RUTs únicos con al menos 1 factura:

*   **RUT:** 76742300-4,...'
[2025-09-05 01:10:55] [SUCCESS] [Backend-B] ✅ Respuesta recibida (5874.6847ms,  chars)
[2025-09-05 01:10:55] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:10:55] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:11:00] [INFO] 🔄 Test 6/10: Test: Búsqueda por fecha específica 2019-12-26
[2025-09-05 01:11:00] [INFO] [Backend-A] 📤 Enviando consulta: 'Puedes darme las facturas del 26 de diciembre de 2...'
[2025-09-05 01:11:00] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-110769052...
[2025-09-05 01:11:00] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:11:00] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:00] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:11:03] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:11:03] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:11:03] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas para el 26 de diciembre de 2019....'
[2025-09-05 01:11:03] [SUCCESS] [Backend-A] ✅ Respuesta recibida (2682.5035ms,  chars)
[2025-09-05 01:11:03] [INFO] [Backend-B] 📤 Enviando consulta: 'Puedes darme las facturas del 26 de diciembre de 2...'
[2025-09-05 01:11:03] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-1830892338...
[2025-09-05 01:11:03] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:11:03] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:03] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:11:05] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:11:05] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:11:05] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas para el 26 de diciembre de 2019. ¿Hay alguna otra fecha que te interese?...'
[2025-09-05 01:11:05] [SUCCESS] [Backend-B] ✅ Respuesta recibida (2351.3422ms,  chars)
[2025-09-05 01:11:06] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:11:06] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:11:11] [INFO] 🔄 Test 7/10: Test: Búsqueda por Mes y Año Específico
[2025-09-05 01:11:11] [INFO] [Backend-A] 📤 Enviando consulta: 'Busca facturas de diciembre 2019...'
[2025-09-05 01:11:11] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-1619912831...
[2025-09-05 01:11:11] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:11:11] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:11] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:11:25] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 5 eventos
[2025-09-05 01:11:25] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:11:25] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'Aquí tienes los enlaces individuales para las 4 facturas encontradas de diciembre de 2019:

1.  [Fac...'
[2025-09-05 01:11:25] [SUCCESS] [Backend-A] ✅ Respuesta recibida (13791.7417ms,  chars)
[2025-09-05 01:11:25] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:11:25] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:11:25] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:11:25] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101507588/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:11:25] [INFO] [Backend-B] 📤 Enviando consulta: 'Busca facturas de diciembre 2019...'
[2025-09-05 01:11:25] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-76745119...
[2025-09-05 01:11:25] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:11:25] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:25] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:11:40] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 5 eventos
[2025-09-05 01:11:40] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 2 eventos del modelo
[2025-09-05 01:11:40] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'Se han encontrado 4 facturas para diciembre de 2019. Puedes descargar cada una usando los siguientes...'
[2025-09-05 01:11:40] [SUCCESS] [Backend-B] ✅ Respuesta recibida (14586.208ms,  chars)
[2025-09-05 01:11:40] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:11:40] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:11:40] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:11:40] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101507588/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:11:40] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:11:40] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:11:45] [INFO] 🔄 Test 8/10: Test: Búsqueda por Múltiples RUTs
[2025-09-05 01:11:45] [INFO] [Backend-A] 📤 Enviando consulta: 'Busca facturas de los RUTs 9025012-4,76341146-K...'
[2025-09-05 01:11:45] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-431980908...
[2025-09-05 01:11:46] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:11:46] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:46] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:11:48] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:11:48] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:11:48] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas para los RUTs especificados....'
[2025-09-05 01:11:48] [SUCCESS] [Backend-A] ✅ Respuesta recibida (2530.0292ms,  chars)
[2025-09-05 01:11:48] [INFO] [Backend-B] 📤 Enviando consulta: 'Busca facturas de los RUTs 9025012-4,76341146-K...'
[2025-09-05 01:11:49] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-551121502...
[2025-09-05 01:11:49] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:11:49] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:49] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:11:52] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 3 eventos
[2025-09-05 01:11:52] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:11:52] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'No se encontraron facturas para los RUTs especificados....'
[2025-09-05 01:11:52] [SUCCESS] [Backend-B] ✅ Respuesta recibida (2620.366ms,  chars)
[2025-09-05 01:11:52] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:11:52] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:11:57] [INFO] 🔄 Test 9/10: Test: Búsqueda por rango de fechas diciembre 2019
[2025-09-05 01:11:57] [INFO] [Backend-A] 📤 Enviando consulta: 'Puedes darme las facturas entre el 1 de diciembre ...'
[2025-09-05 01:11:57] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-267614219...
[2025-09-05 01:11:57] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:11:57] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:11:57] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:12:50] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 5 eventos
[2025-09-05 01:12:50] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 1 eventos del modelo
[2025-09-05 01:12:50] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'Se encontraron 4 facturas para el período solicitado. Aquí tienes los enlaces de descarga individual...'
[2025-09-05 01:12:50] [SUCCESS] [Backend-A] ✅ Respuesta recibida (52813.364ms,  chars)
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Cedible_cf.pdf?X-Goog-Algorith...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Cedible_sf.pdf?X-Goog-Algorith...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Cedible_cf.pdf?X-Goog-Algorith...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Cedible_sf.pdf?X-Goog-Algorith...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Doc_Termico.pdf?X-Goog-Algorithm=GOO...
[2025-09-05 01:12:50] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Cedible_cf.pdf?X-Goog-Algorith...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Cedible_sf.pdf?X-Goog-Algorith...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Doc_Termico.pdf?X-Goog-Algorithm=GOO...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101507588/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101507588/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:12:51] [URL_SIGNED] [Backend-A] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101507588/Doc_Termico.pdf?X-Goog-Algorithm=GOO...
[2025-09-05 01:12:51] [INFO] [Backend-B] 📤 Enviando consulta: 'Puedes darme las facturas entre el 1 de diciembre ...'
[2025-09-05 01:12:51] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-1981224297...
[2025-09-05 01:12:51] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:12:51] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:12:51] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:16:34] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 5 eventos
[2025-09-05 01:16:34] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 2 eventos del modelo
[2025-09-05 01:16:34] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'Se encontraron 4 facturas para el período solicitado. Aquí tienes los enlaces de descarga individual...'
[2025-09-05 01:16:34] [SUCCESS] [Backend-B] ✅ Respuesta recibida (222918.0121ms,  chars)
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Cedible_cf.pdf?X-Goog-Algorith...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Cedible_sf.pdf?X-Goog-Algorith...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101531734/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Cedible_cf.pdf?X-Goog-Algorith...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Cedible_sf.pdf?X-Goog-Algorith...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Tributaria_cf.pdf?X-Goog-Algor...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Copia_Tributaria_sf.pdf?X-Goog-Algor...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101552280/Doc_Termico.pdf?X-Goog-Algorithm=GOO...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Cedible_cf.pdf?X-Goog-Algorith...
[2025-09-05 01:16:34] [URL_SIGNED] [Backend-B] ✅ URL FIRMADA detectada: https://storage.googleapis.com/miguel-test/descargas/0101514836/Copia_Cedible_sf.pdf?X-Goog-Algorith...
[2025-09-05 01:16:34] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:16:34] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:16:40] [INFO] 🔄 Test 10/10: Test: Búsqueda de Facturas Más Recientes
[2025-09-05 01:16:40] [INFO] [Backend-A] 📤 Enviando consulta: 'Dame las 10 facturas más recientes...'
[2025-09-05 01:16:40] [INFO] [Backend-A] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-A-1738719136...
[2025-09-05 01:16:40] [SUCCESS] [Backend-A] ✅ Sesión creada
[2025-09-05 01:16:40] [INFO] [Backend-A] 🔗 Enviando a /run endpoint...
[2025-09-05 01:16:40] [INFO] [Backend-A] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:17:05] [INFO] [Backend-A] 🔍 DEBUG: Respuesta es array con 5 eventos
[2025-09-05 01:17:05] [INFO] [Backend-A] 🔍 DEBUG: Encontrados 2 eventos del modelo
[2025-09-05 01:17:05] [INFO] [Backend-A] 🔍 DEBUG: Texto extraído: 'He generado un archivo ZIP con las 10 facturas más recientes.

Puedes descargarlas aquí: [Descargar ...'
[2025-09-05 01:17:05] [SUCCESS] [Backend-A] ✅ Respuesta recibida (24876.073ms,  chars)
[2025-09-05 01:17:05] [INFO] [Backend-B] 📤 Enviando consulta: 'Dame las 10 facturas más recientes...'
[2025-09-05 01:17:05] [INFO] [Backend-B] 📝 Creando sesión: diagnosis-session-20250905_010938-Backend-B-1560117552...
[2025-09-05 01:17:05] [SUCCESS] [Backend-B] ✅ Sesión creada
[2025-09-05 01:17:05] [INFO] [Backend-B] 🔗 Enviando a /run endpoint...
[2025-09-05 01:17:05] [INFO] [Backend-B] ⏱️ Enviando consulta (timeout: 300s para procesamiento completo)...
[2025-09-05 01:17:33] [INFO] [Backend-B] 🔍 DEBUG: Respuesta es array con 5 eventos
[2025-09-05 01:17:33] [INFO] [Backend-B] 🔍 DEBUG: Encontrados 2 eventos del modelo
[2025-09-05 01:17:33] [INFO] [Backend-B] 🔍 DEBUG: Texto extraído: 'He generado un archivo ZIP con todos los PDFs de las 10 facturas más recientes.

Puedes descargarlo ...'
[2025-09-05 01:17:33] [SUCCESS] [Backend-B] ✅ Respuesta recibida (27610.2727ms,  chars)
[2025-09-05 01:17:33] [ANALYSIS] 📈 Comparación - Proxy URLs: A=0, B=0 | Signed URLs: A=0, B=0
[2025-09-05 01:17:33] [INFO] ⏸️ Pausa de 5 segundos antes del siguiente test...
[2025-09-05 01:17:38] [INFO] 📊 Generando reporte final...
[2025-09-05 01:17:38] [ANALYSIS] 📊 Generando reporte comparativo...
[2025-09-05 01:17:38] [SUCCESS] 💾 Reporte guardado en: diagnosis_results\comparison_results_20250905_010938.json
[2025-09-05 01:17:38] [SUCCESS] ✅ Diagnóstico completado exitosamente!
