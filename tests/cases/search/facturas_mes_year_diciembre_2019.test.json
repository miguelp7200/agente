{
    "name": "Test: Búsqueda por Mes y Año Específico",
    "description": "Valida la herramienta search_invoices_by_month_year con datos reales. Busca facturas de diciembre 2019 usando funciones EXTRACT. Se encuentran 4 facturas: 0101531734, 0101552280, 0101514836, y 0101507588.",
    "expected_trajectory": [
        {
            "tool_name": "search_invoices_by_month_year",
            "args": {
                "target_year": 2019,
                "target_month": 12
            }
        }
    ],
    "expected_response": {
        "should_contain": [
            "0101531734",
            "PEDRO IGNACIO FUENTES ESTRADA",
            "0101552280",
            "MOVIL 205 SPA",
            "diciembre",
            "2019",
            "storage.googleapis.com"
        ],
        "should_not_contain": [
            "error",
            "disculpa",
            "lo siento",
            "2018",
            "2020",
            "enero",
            "noviembre"
        ]
    },
    "metadata": {
        "category": "search_month_year",
        "priority": "high",
        "created_date": "2025-08-25",
        "validation_data": {
            "expected_year": 2019,
            "expected_month": 12,
            "expected_facturas": [
                "0101531734",
                "0101552280", 
                "0101514836",
                "0101507588"
            ],
            "expected_clientes": [
                "PEDRO IGNACIO FUENTES ESTRADA",
                "MOVIL 205 SPA",
                "MIGUEL GONZALO ZARAGOZA CHACANA TRA",
                "PEDRO DIAZ GARCIA"
            ],
            "expected_ruts": [
                "15420171-8",
                "77010182-4",
                "76735422-3", 
                "10884019-6"
            ]
        },
        "test_criteria": {
            "signed_urls": "Deben incluir https://storage.googleapis.com con URLs firmadas",
            "date_filtering": "Solo facturas de diciembre 2019",
            "extract_functions": "Usar EXTRACT(YEAR) y EXTRACT(MONTH)",
            "response_format": "Formato mejorado con contexto por factura",
            "expected_count": "4 facturas encontradas para diciembre 2019"
        }
    },
    "query": "Busca facturas de diciembre 2019"
}